(function() {
    'use strict';
    
    if (!window.Lampa) return;
    
    const PLUGIN_NAME = "ExtendedPodborki";
    const SETTINGS_KEY = "extended_podborki_settings";
    
    const allCategories = [
        {
            title: 'В качестве',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 512 414.89" height="30" fill="CurrentColor"><path fill-rule="nonzero" d="M189.688 279.224V256.79H119.88v-30.267l57.765-90.857h49.345v90.857h16.546v30.267H226.99v22.434h-37.302zM80.058 0h351.889c21.902 0 41.854 9.115 56.353 23.619C502.917 38.236 512 58.373 512 80.226v254.438c0 21.804-9.175 41.898-23.766 56.477-14.574 14.58-34.591 23.749-56.287 23.749H80.058c-21.744 0-41.827-9.076-56.423-23.683C9.121 376.698 0 356.686 0 334.664V80.226c0-22.065 9.028-42.131 23.57-56.672C38.101 9.022 58.101 0 80.058 0zm351.889 33.331H80.058c-13.004 0-24.792 5.286-33.293 13.787-8.496 8.495-13.771 20.218-13.771 33.108v254.438c0 12.809 5.34 24.488 13.836 32.978 8.577 8.583 20.403 13.917 33.228 13.917h351.889c12.744 0 24.515-5.399 33.092-13.982 8.572-8.566 13.967-20.283 13.967-32.913V80.226c0-12.711-5.33-24.471-13.901-33.043-8.501-8.501-20.24-13.852-33.158-13.852zM261.456 279.224V135.666h38.981v58.058h1.972l43.163-58.058H391l-48.519 63.946 49.639 79.612h-46.548l-32.239-53.82-12.896 16.812v37.008h-38.981zm-70.915-52.701v-50.464h-1.119l-31.12 49.345v1.119h32.239z"></path></svg>',
            query: '?cat=&sort=now&uhd=true',
            source: 'cub',
            settingName: 'ext_hd'
        },
        {
            title: 'Русские фильмы',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 48 48"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M12.071 33V15h5.893c3.331 0 6.032 2.707 6.032 6.045s-2.7 6.045-6.032 6.045h-5.893m5.893 0l5.892 5.905m3.073-11.92V28.5a4.5 4.5 0 0 0 4.5 4.5h0a4.5 4.5 0 0 0 4.5-4.5v-7.425m0 7.425V33"/><rect width="37" height="37" x="5.5" y="5.5" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" rx="4" ry="4"/></svg>',
            query: '?cat=movie&airdate=2015-2025&without_genres=16&language=ru',
            source: 'cub',
            settingName: 'ext_rus'
        },
        {
            title: 'Okko',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24"><path fill="currentColor" d="M20.698 9.692a3.286 3.286 0 0 0-3.293 3.285a3.285 3.285 0 0 0 3.293 3.278c1.824 0 3.302-1.462 3.302-3.278a3.29 3.29 0 0 0-3.302-3.285m-.008 5.191c-1.01 0-1.84-.895-1.84-1.906c0-1.018.83-1.913 1.84-1.913c1.018 0 1.848.895 1.848 1.913c0 1.01-.83 1.906-1.848 1.906m-8.476-5.076h-1.602l-1.897 2.637V7.852H7.26v8.288h1.454v-2.637l2.045 2.637h1.716l-2.521-3.204Zm5.634 0h-1.602l-1.897 2.637V7.852h-1.454v8.288h1.454v-2.637l2.045 2.637h1.717l-2.522-3.204ZM3.294 9.199a.73.73 0 0 0 .722-.73a.73.73 0 0 0-.722-.724a.73.73 0 0 0-.731.723c0 .403.328.731.73.731m1.889 0a.73.73 0 0 0 .723-.73a.73.73 0 0 0-.723-.724a.73.73 0 0 0-.731.723c0 .403.328.731.73.731m-3.778 0a.73.73 0 0 0 .722-.73a.73.73 0 0 0-.722-.724a.73.73 0 0 0-.731.723c0 .403.328.731.73.731m1.889.493A3.286 3.286 0 0 0 0 12.977a3.285 3.285 0 0 0 3.294 3.278c1.823 0 3.301-1.462 3.301-3.278a3.29 3.29 0 0 0-3.301-3.285m0 5.191c-1.01 0-1.84-.895-1.84-1.906c0-1.018.83-1.913 1.84-1.913c1.018 0 1.848.895 1.848 1.913c0 1.01-.83 1.906-1.848 1.906"/></svg>',
            query: 'discover/tv?language=ru&with_networks=3871&sort_by=first_air_date.desc&first_air_date.gte=2015-01-01&first_air_date.lte=',
            source: 'tmdb',
            settingName: 'ext_okko'
        },
        {
            title: 'Иви',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="128" height="128"><path fill="currentColor" d="M4.863 5.537c-1.205 0-2.296.199-3.043.854c-.988.89-1.366 2.446-1.654 4.891a22 22 0 0 0-.149 2.282c0 1.252.195 2.235.77 2.972c.482.62 1.171.983 1.998 1.252c1.504.469 3.698.586 5.237.586c1.16 0 2.033-.176 2.63-.562c.54-.351.953-.843 1.251-1.521c.138-.293.207-.62.242-.714h-.574l-.161.41c-.482 1.228-1.447 1.825-3.17 1.825c-.666 0-1.516.012-2.48-.082c-2.665-.257-3.86-.643-4.525-1.486c-.678-.878-.816-2.329-.517-4.88c.149-1.322.402-3.709 1.47-4.563c.586-.468 1.378-.714 2.664-.714c.62 0 1.47.047 2.274.129c1.711.175 3.916.433 4.732 1.813c.091.164.137.305.137.305h.586c-.046-.117-.08-.234-.15-.363c-.436-.878-1.17-1.38-2.181-1.732c-.724-.257-1.62-.433-2.917-.562c-.724-.07-1.711-.14-2.47-.14M18.82 8.935c-.734 0-1.193.502-1.239 1.145l-.252 3.528c-.057.876.39 1.378 1.112 1.378s1.158-.526 1.48-1.005l1.547-2.395l-.138 2.021c-.057.818.367 1.379 1.158 1.379c.734 0 1.215-.444 1.261-1.11l.264-3.563c.046-.7-.287-1.378-1.204-1.378c-.504 0-.94.21-1.341.83l-1.605 2.464l.149-1.916c.046-.724-.39-1.378-1.192-1.378m-14.206 0c-.733 0-1.192.502-1.238 1.145l-.252 3.528c-.058.876.39 1.378 1.1 1.378s1.158-.526 1.491-1.005l1.548-2.394l-.138 2.02c-.069.818.367 1.379 1.158 1.379c.734 0 1.215-.444 1.261-1.11l.252-3.563c.058-.7-.275-1.378-1.192-1.378c-.516 0-.929.21-1.341.83l-1.605 2.464l.149-1.916c.046-.724-.401-1.378-1.193-1.378m7.602.047c-1.17 0-1.605.479-1.697 1.799l-.15 2.208c-.102 1.471.31 1.939 1.744 1.939h2.43c1.399 0 2.155-.584 2.155-1.636c0-.818-.607-1.332-1.398-1.448c.745-.152 1.387-.643 1.387-1.449c0-.9-.676-1.413-1.938-1.413zm.653 1.063h.562c.562 0 .894.245.894.665c0 .444-.344.701-.963.701h-.516s.046-.794.023-1.366m-.103 2.394h.62c.538 0 .916.222.916.678c0 .526-.39.76-1.043.76h-.676s.114-.725.183-1.438"/></svg>',
            query: 'discover/tv?language=ru&with_networks=3923&sort_by=first_air_date.desc&first_air_date.gte=2015-01-01&first_air_date.lte=',
            source: 'tmdb',
            settingName: 'ext_ivi'
        },
        {
            title: 'Wink',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 48 48"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M18.644 24.001L7.931 13.288L18.644 2.575L40.069 24L18.644 45.425L7.931 34.712z"/></svg>',
            query: 'discover/tv?language=ru&with_networks=5806&sort_by=first_air_date.desc&first_air_date.gte=2015-01-01&first_air_date.lte=',
            source: 'tmdb',
            settingName: 'ext_wink'
        },
        {
            title: 'KION',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M23.084 8.47h.373c.347 0 .55.174.55.444c0 .256-.19.463-.533.463h-.114v.357h-.276zm.643.455c0-.132-.1-.202-.243-.202h-.124v.408h.125c.143 0 .242-.074.242-.206m-1.646-.202h-.37v-.252h1.013v.252h-.368v1.01h-.275zm-.827 1.01l-.112-.308h-.472l-.108.309h-.288l.472-1.263h.319l.479 1.263Zm-.508-.534h.319l-.16-.44ZM19.04 8.47h.792v.249h-.516v.262h.472v.228h-.472v.276h.516v.248h-.792Zm-1.078.252h-.37V8.47h1.013v.252h-.369v1.01h-.274zm-1.993.38a.64.64 0 0 1 .652-.66c.37 0 .652.277.652.66c0 .382-.281.66-.652.66a.64.64 0 0 1-.652-.66m1.024 0c0-.26-.18-.407-.372-.407c-.193 0-.372.148-.372.406c0 .261.18.409.372.409c.191 0 .372-.15.372-.409m-1.768.125h-.516v.506h-.276V8.47h.276v.506h.516V8.47h.274v1.263h-.274ZM12.71 8.47h.263v.848h.001l.581-.848h.266v1.263h-.262v-.859h-.002l-.582.859h-.264zm-.8 1.263l-.475-.601v.6h-.276v-1.26h.276v.592l.472-.592h.324l-.505.623l.515.64zm-1.82-.643h.493v.208h-.493Zm-.852.137h-.516v.506h-.276V8.47h.276v.506h.516V8.47h.274v1.263h-.274ZM6.722 8.47h.263v.848h.001l.581-.848h.266v1.263H7.57v-.859h-.002l-.582.859h-.264zm.564-.114c-.178 0-.326-.09-.326-.305h.194c0 .104.04.16.132.16c.091 0 .132-.057.132-.16h.193c.001.216-.146.305-.325.305M5.953 9.734l-.111-.309H5.37l-.109.309h-.288l.472-1.263h.319l.479 1.263Zm-.508-.535h.319l-.16-.44Zm-2.033.303c.15 0 .211-.095.211-.322v-.71h.867v1.263h-.276v-1.01h-.322v.453c0 .402-.139.566-.48.566zm-.841-.274h-.517v.506h-.276V8.47h.276v.506h.517V8.47h.274v1.263H2.57ZM.007 9.102a.64.64 0 0 1 .652-.66a.64.64 0 0 1 .652.66c0 .383-.281.66-.652.66a.64.64 0 0 1-.652-.66m1.024 0c0-.259-.181-.406-.372-.406c-.193 0-.373.148-.373.406c0 .261.182.409.373.409s.372-.15.372-.409m6.857 1.66v5.264a.213.213 0 0 1-.213.213H6.303a.213.213 0 0 1-.213-.213v-5.264c0-.117.096-.212.213-.212h1.372c.118 0 .213.095.213.212M5.742 16l-1.599-2.736l1.516-2.466a.159.159 0 0 0-.13-.249l-1.666.003a.16.16 0 0 0-.132.07l-1.177 2.001h-.688v-1.86a.213.213 0 0 0-.212-.213H.282a.213.213 0 0 0-.213.212v5.264c0 .117.096.213.213.213h1.372a.213.213 0 0 0 .213-.213v-1.853h.836l1.17 1.99a.16.16 0 0 0 .136.078h1.598c.124 0 .2-.135.135-.241m17.99.239a.213.213 0 0 0 .212-.213v-5.264a.213.213 0 0 0-.212-.212h-1.323a.213.213 0 0 0-.212.212l.008 2.693l-2.401-2.903h-1.526a.213.213 0 0 0-.212.213v5.264c0 .117.095.212.212.212h1.32a.21.21 0 0 0 .212-.212v-2.696l2.377 2.906zm-6.216-5.455v5.22c0 .13-.105.235-.235.235H8.672a.235.235 0 0 1-.234-.235v-5.22c0-.13.105-.235.234-.235h8.61c.129 0 .234.106.234.235m-1.787 1.278a.075.075 0 0 0-.09-.073c-.93.186-4.223.214-5.327-.001a.074.074 0 0 0-.088.073v2.583c0 .046.04.08.086.074c.916-.136 4.396-.113 5.336.003a.074.074 0 0 0 .083-.074z"/></svg>',
            query: 'discover/tv?language=ru&with_networks=4085&sort_by=first_air_date.desc&first_air_date.lte=',
            source: 'tmdb',
            settingName: 'ext_kion'
        },
        {
            title: 'Netflix',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M5.398 0v.006c3.028 8.556 5.37 15.175 8.348 23.596c2.344.058 4.85.398 4.854.398c-2.8-7.924-5.923-16.747-8.487-24zm8.489 0v9.63L18.6 22.951c-.043-7.86-.004-15.913.002-22.95zM5.398 1.05V24c1.873-.225 2.81-.312 4.715-.398v-9.22z"/></svg>',
            query: 'discover/tv?sort_by=first_air_date.desc&first_air_date.gte=2015-01-01&vote_average.gte=5&vote_average.lte=10&first_air_date.lte=',
            source: 'tmdb',
            networks: '213',
            settingName: 'ext_netflix'
        },
        {
            title: 'Дорамы',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512"><path fill="currentColor" d="M418.813 30.625c-21.178 26.27-49.712 50.982-84.125 70.844c-36.778 21.225-75.064 33.62-110.313 38.06a310 310 0 0 0 6.813 18.25c16.01.277 29.366-.434 36.406-1.5l9.47-1.53l8.436-1.28l.22 10.186a308 308 0 0 1-1.095 18.72l56.625 8.843q1.289-.145 2.563-.157c11.188-.114 21.44 7.29 24.468 18.593c.657 2.448.922 4.903.845 7.313c5.972-2.075 11.753-4.305 17.28-6.72l9.595-4.188l2.313 10.22a340 340 0 0 1 7.375 48.062C438.29 247.836 468.438 225.71 493 197.5c-3.22-36.73-16.154-78.04-39.125-117.813a291 291 0 0 0-2.22-3.78l-27.56 71.374c5.154.762 10.123 3.158 14.092 7.126c9.81 9.807 9.813 25.69 0 35.5c-9.812 9.81-25.722 9.807-35.53 0c-8.86-8.858-9.69-22.68-2.532-32.5l38.938-100.844a322 322 0 0 0-20.25-25.937zM51.842 118.72c-8.46 17.373-15.76 36.198-21.187 56.436c-14.108 52.617-13.96 103.682-2.812 143.438c13.3-2.605 26.442-3.96 39.312-4.03c1.855-.012 3.688.02 5.53.06c20.857.48 40.98 4.332 59.97 11.5a355 355 0 0 1-1.656-34.218c0-27.8 3.135-54.377 9-78.937l2.47-10.407l9.655 4.562c29.467 13.98 66.194 23.424 106.28 25.22c5.136-20.05 8.19-39.78 9.408-58.75c-35.198 4.83-75.387 2.766-116.407-8.22c-38.363-10.272-72.314-26.78-99.562-46.656zm230.594 82.218c-1.535 10.452-3.615 21.03-6.218 31.687a313 313 0 0 0 46-3.97a24.98 24.98 0 0 1-1.532-21.748zM105 201.375l4.156 18.22l-21.594 4.905c8.75 5.174 13.353 15.703 10.594 26c-3.32 12.394-16.045 19.758-28.437 16.438c-12.394-3.32-19.76-16.075-16.44-28.47a23.2 23.2 0 0 1 3.126-6.874l-21.062 4.78l-4.125-18.218l73.78-16.78zm388.594 22.813c-25.53 25.46-55.306 45.445-86.906 60.5c.05 2.397.093 4.8.093 7.218c0 9.188-.354 18.232-1.03 27.125c16.635 1.33 32.045-1.7 45.344-9.374c25.925-14.962 40.608-45.694 42.5-85.47zm-338.844 3c-4.03 19.993-6.33 41.31-6.406 63.593l.125-.342c30.568 10.174 62.622 17.572 95.25 21.375l7.5.875l.718 7.5l5.687 60.125l-18.625 1.75l-2.53-26.75a23.1 23.1 0 0 1-14.845.968c-12.393-3.32-19.76-16.042-16.438-28.436c.285-1.06.647-2.08 1.063-3.063a497 497 0 0 1-57.406-14.53c2.69 49.62 16.154 94.04 36.094 126.656c22.366 36.588 52.13 57.78 83.968 57.78c31.838.003 61.602-21.19 83.97-57.78c19.536-31.96 32.846-75.244 35.905-123.656a499 499 0 0 1-48.25 11.656c1.914 4.57 2.415 9.78 1.033 14.938c-3.322 12.394-16.045 19.758-28.438 16.437a23 23 0 0 1-2.125-.686l-2.5 26.47l-18.594-1.752l5.688-60.125l.72-7.5l7.498-.875c29.245-3.407 57.995-9.717 85.657-18.312v-1.594c0-21.573-2.27-42.23-6.064-61.75C351.132 242.653 313.092 250 272.312 250c-43.59 0-83.986-8.658-117.562-22.813zm-87.5 105.968c-10.87.102-21.995 1.22-33.375 3.313c12.695 31.62 33.117 53.07 59 60c16.9 4.523 34.896 2.536 52.813-5.25c-4.382-13.89-7.874-28.606-10.344-43.97c-21.115-9.623-43.934-14.32-68.094-14.094zm137.5 80.22h130.813c-40.082 44.594-92.623 42.844-130.813 0"/></svg>',
            query: 'discover/tv?sort_by=first_air_date.desc&first_air_date.gte=2015-01-01&without_genres=16&with_original_language=ko&vote_average.gte=5&vote_average.lte=10&first_air_date.lte=',
            source: 'tmdb',
            settingName: 'ext_doramy'
        },
        {
            title: 'Турецкие сериалы',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64"><path fill="currentColor" d="M32 2C15.432 2 2 15.432 2 32s13.432 30 30 30s30-13.432 30-30S48.568 2 32 2m-3.117 15.25c4.381 0 8.311 1.955 10.984 5.049a11.53 11.53 0 0 0-6.638-2.099c-6.444 0-11.668 5.283-11.668 11.8s5.224 11.8 11.668 11.8c2.466 0 4.753-.775 6.638-2.097c-2.674 3.092-6.604 5.047-10.984 5.047C20.828 46.75 14.3 40.147 14.3 32s6.528-14.75 14.583-14.75M49.7 36.254l-5.263-1.638l-3.246 4.268l.012-5.267L35.934 32l5.27-1.617l-.012-5.266l3.246 4.267l5.263-1.638L46.436 32z"/></svg>',
            query: 'discover/tv?sort_by=first_air_date.desc&first_air_date.gte=2015-01-01&without_genres=16&with_original_language=tr&vote_average.gte=5&vote_average.lte=10&first_air_date.lte=',
            source: 'tmdb',
            settingName: 'ext_turkish'
        },
        {
            title: 'Индийские фильмы',
            icon: `<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 48 48"><circle cx="24" cy="24" r="7.5" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><circle cx="24" cy="24" r="1.697" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M24 22.303v-5.799m1.2 6.296l4.1-4.1M25.697 24h5.799M25.2 25.2l4.1 4.1M24 25.697v5.799M22.8 25.2l-4.1 4.1m3.603-5.3h-5.799m6.296-1.2l-4.1-4.1m5.739 3.661l1.501-5.601m-.471 6.392l5.022-2.9m-4.852 4.187l5.601 1.501m-6.392-.471l2.9 5.022m-4.187-4.852L22.06 31.24m.471-6.392l-5.022 2.9m4.852-4.187L16.76 22.06m6.392.471l-2.9-5.022m4.596 5.022l2.9-5.022m-2.109 6.052l5.601-1.501m-5.771 2.788l5.022 2.9m-6.052-2.109l1.501 5.601m-2.788-5.771l-2.9 5.022m2.109-6.052L16.76 25.94m5.771-2.788l-5.022-2.9m6.052 2.109L22.06 16.76" stroke-width="1"/><circle cx="24" cy="24" r="21.5" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M43.29 14.5H4.71m38.58 19H4.71" stroke-width="1"/></svg>`,
            query: 'discover/movie?sort_by=primary_release_date.desc&primary_release_date.gte=2015-01-01&without_genres=16&with_original_language=hi&vote_average.gte=5&vote_average.lte=10&first_air_date.lte=',
            source: 'tmdb',
            settingName: 'ext_indian'
        },
        {
            title: 'HBO',
            icon: `<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24"><path fill="currentColor" d="M7.042 16.896H4.414v-3.754H2.708v3.754H.01L0 7.22h2.708v3.6h1.706v-3.6h2.628zm12.043.046C21.795 16.94 24 14.689 24 11.978a4.89 4.89 0 0 0-4.915-4.92c-2.707-.002-4.09 1.991-4.432 2.795c.003-1.207-1.187-2.632-2.58-2.634H7.59v9.674l4.181.001c1.686 0 2.886-1.46 2.888-2.713c.385.788 1.72 2.762 4.427 2.76zm-7.665-3.936c.387 0 .692.382.692.817s-.305.817-.692.817h-1.33v-1.634zm.005-3.633c.387 0 .692.382.692.817c0 .436-.305.818-.692.818h-1.33V9.373zm1.77 2.607c.305-.039.813-.387.992-.61c-.063.276-.068 1.074.006 1.35c-.204-.314-.688-.701-.998-.74m3.43 0a2.462 2.462 0 1 1 4.924 0a2.462 2.462 0 0 1-4.925 0zm2.462 1.936a1.936 1.936 0 1 0 0-3.872a1.936 1.936 0 0 0 0 3.872"/></svg>`,
            query: 'discover/tv?sort_by=first_air_date.desc&first_air_date.gte=2015-01-01&vote_average.gte=5&vote_average.lte=10&first_air_date.lte=',
            source: 'tmdb',
            networks: '49',
            settingName: 'ext_hbo'
        },
        {
            title: 'Apple TV+',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M20.57 17.735h-1.815l-3.34-9.203h1.633l2.02 5.987c.075.231.273.9.586 2.012l.297-.997l.33-1.006l2.094-6.004H24zm-5.344-.066a5.8 5.8 0 0 1-1.55.207c-1.23 0-1.84-.693-1.84-2.087V9.646h-1.063V8.532h1.121V7.081l1.476-.602v2.062h1.707v1.113H13.38v5.805c0 .446.074.75.214.932s.396.264.75.264c.207 0 .495-.041.883-.115zm-7.29-5.343c.017 1.764 1.55 2.358 1.567 2.366c-.017.042-.248.842-.808 1.658c-.487.71-.99 1.418-1.79 1.435c-.783.016-1.03-.462-1.93-.462c-.89 0-1.17.445-1.913.478c-.758.025-1.344-.775-1.838-1.484c-.998-1.451-1.765-4.098-.734-5.88c.51-.89 1.426-1.451 2.416-1.46c.75-.016 1.468.512 1.93.512s1.327-.627 2.234-.536c.38.016 1.452.157 2.136 1.154c-.058.033-1.278.743-1.27 2.219M6.468 7.988c.404-.495.685-1.18.61-1.864c-.585.025-1.294.388-1.723.883c-.38.437-.71 1.138-.619 1.806c.652.05 1.328-.338 1.732-.825"/></svg>',
            query: 'discover/tv?sort_by=first_air_date.desc&first_air_date.gte=2015-01-01&vote_average.gte=5&vote_average.lte=10&first_air_date.lte=',
            source: 'tmdb',
            networks: '2552',
            settingName: 'ext_apple'
        },
        {
            title: 'Prime Video',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M20.182 5.404a4 4 0 0 0 .625.05a1.1 1.1 0 0 0 .342-.03a.47.47 0 0 0 .404-.306a.6.6 0 0 0 .015-.276a.4.4 0 0 0-.243-.334a.9.9 0 0 0-.281-.064a.79.79 0 0 0-.833.499a1.4 1.4 0 0 0-.102.367c-.006.088-.006.088.073.094m-1.074-.4a1.81 1.81 0 0 1 1.633-1.359a2.4 2.4 0 0 1 1.057.102c.655.224 1.009.932.794 1.59a1 1 0 0 1-.489.588a2 2 0 0 1-.66.211a3.5 3.5 0 0 1-1.207-.016a1 1 0 0 0-.146-.023a.88.88 0 0 0 .716.954a2.6 2.6 0 0 0 .995 0c.154-.033.302-.065.456-.102s.218.012.218.17v.392a.24.24 0 0 1-.18.26a3 3 0 0 1-.626.17a3.3 3.3 0 0 1-1.214-.01a1.66 1.66 0 0 1-1.36-1.272a2.94 2.94 0 0 1 .016-1.656zm.317 6.367a2.6 2.6 0 0 1 1.012.039a1.94 1.94 0 0 1 1.41 1.635v.011h-.014v.1a.08.08 0 0 0 .024.08v-.021l.007.01v.61l-.012.021v-.01c-.03.02-.02.047-.02.08V14c-.048.9-.747 1.63-1.644 1.717a2.6 2.6 0 0 1-.998-.052a1.7 1.7 0 0 1-1.246-1.114a2.83 2.83 0 0 1 0-2.005c.219-.65.8-1.11 1.482-1.175zM12 3.946q0-.065.016-.127a.16.16 0 0 1 .147-.102h.67a.19.19 0 0 1 .184.147c.028.075.044.147.07.223c.053 0 .086-.036.122-.057a2.7 2.7 0 0 1 .946-.398a2 2 0 0 1 .795 0c.25.054.47.202.615.413l.03.038v.014c.132-.079.271-.164.415-.237a2.4 2.4 0 0 1 1.203-.266a1.06 1.06 0 0 1 1.095 1.027v2.964c0 .238-.03.27-.27.27h-.647a1 1 0 0 1-.126 0a.15.15 0 0 1-.128-.122a1 1 0 0 1-.01-.175V5.101a1 1 0 0 0-.033-.293a.4.4 0 0 0-.36-.294a1.86 1.86 0 0 0-.912.176a.09.09 0 0 0-.063.096v2.788a1 1 0 0 1-.01.155c0 .07-.058.127-.128.127h-.81c-.197 0-.24-.047-.24-.243V5.1a1.2 1.2 0 0 0-.026-.276a.4.4 0 0 0-.371-.318a1.9 1.9 0 0 0-.928.18a.085.085 0 0 0-.059.103v2.833c0 .195-.044.236-.239.236h-.704c-.188 0-.235-.053-.235-.232zm2.71 9.92a.2.2 0 0 0-.074-.011a2 2 0 0 0 .057.324c.08.337.358.59.7.636a2.7 2.7 0 0 0 1.088-.037a7 7 0 0 0 .345-.085c.154-.037.223.023.223.170v.385a.235.235 0 0 1-.19.271a3.4 3.4 0 0 1-1.141.217a3 3 0 0 1-.796-.079a1.63 1.63 0 0 1-1.215-1.136a2.95 2.95 0 0 1-.02-1.776a1.85 1.85 0 0 1 1.838-1.363a2.4 2.4 0 0 1 .792.101c.44.123.775.48.868.928a1.5 1.5 0 0 1 0 .587a.98.98 0 0 1-.535.704a2.2 2.2 0 0 1-.891.230a4.2 4.2 0 0 1-1.055-.067zm-3.133-2.202c.027-.037.012-.075.012-.112V9.847c0-.202.037-.238.238-.238h.734c.161.006.207.044.207.208v5.586c0 .147-.049.201-.196.201h-.69a.19.19 0 0 1-.186-.146a.8.8 0 0 0-.057-.185c-.048.008-.069.045-.107.067a1.71 1.71 0 0 1-1.615.276A1.53 1.53 0 0 1 9 14.804a2.5 2.5 0 0 1-.266-1.13a3 3 0 0 1 .187-1.225a1.66 1.66 0 0 1 .826-.945c.552-.263 1.2-.22 1.713.111a.3.3 0 0 0 .117.059zm-.797-3.817h-.733a.3.3 0 0 1-.075 0a.147.147 0 0 1-.147-.137V3.893c0-.127.054-.176.18-.18a20 20 0 0 1 .828 0c.122 0 .159.037.17.158v3.67a1 1 0 0 1-.01.176a.134.134 0 0 1-.128.120h-.089zm-1.045-5.45a.616.616 0 0 1 .642-.586h.064a.7.7 0 0 1 .248.036a.6.6 0 0 1 .411.67a.59.59 0 0 1-.506.534a1 1 0 0 1-.355 0a.587.587 0 0 1-.504-.660Zm-3.092 5.2V3.983c0-.244.026-.27.27-.27h.51a.21.21 0 0 1 .238.179c.037.132.07.264.1.408a.16.16 0 0 0 .091-.065a4 4 0 0 1 .303-.270a1.4 1.4 0 0 1 .964-.293c.138 0 .186.048.197.18c.01.18 0 .367 0 .546a1 1 0 0 1-.012.22a.147.147 0 0 1-.147.146a2 2 0 0 1-.22 0a2.5 2.5 0 0 0-1.027.147c-.074.026-.074.079-.074.138v2.678a.13.13 0 0 1-.128.122a1 1 0 0 1-.132 0v.01h-.69a1 1 0 0 1-.117 0a.15.15 0 0 1-.126-.132zm.904 3.228a.6.6 0 0 1-.192 0a1 1 0 0 1-.176-.02a.6.6 0 0 1-.466-.7a.587.587 0 0 1 .567-.536a.5.5 0 0 1 .111 0a.64.64 0 0 1 .313.054c.208.078.35.272.361.494a.624.624 0 0 1-.518.716zm.44.855v3.764a.147.147 0 0 1-.133.159h-.88a.147.147 0 0 1-.162-.128v-.026a1 1 0 0 1 0-.1v-3.67c0-.164.045-.21.21-.21h.751c.164.007.211.054.211.218zm-1.711.047l-.317.844l-1.067 2.774c-.01.032-.027.063-.037.095a.26.26 0 0 1-.265.175h-.702a.294.294 0 0 1-.318-.218c-.133-.349-.27-.704-.403-1.055c-.318-.832-.641-1.666-.960-2.504a1 1 0 0 1-.069-.207c-.016-.105.021-.158.128-.158h.901c.128 0 .185.085.218.196c.058.201.117.408.18.61c.217.733.43 1.479.646 2.217h.01l.096-.308l.733-2.46l.031-.095a.214.214 0 0 1 .213-.147h.812c.2-.003.243.054.176.245zM1.786 3.82a.38.38 0 0 1 .318-.107h.488a.21.21 0 0 1 .234.18q.013.08.037.160a.02.02 0 0 0 .02.015a.4.4 0 0 0 .11-.080a1.87 1.87 0 0 1 1.586-.354c.48.115.874.454 1.061.91a2.5 2.5 0 0 1 .205.798h-.008c.051.444.011.893-.118 1.321a1.94 1.94 0 0 1-.550.880c-.340.306-.795.448-1.248.388A1.8 1.8 0 0 1 3 7.564c-.039.033-.022.074-.022.113v1.506c0 .329 0 .329-.334.329h-.572a.29.29 0 0 1-.294-.126Zm19.37 15.225a.6.6 0 0 1-.176.2a11.6 11.6 0 0 1-1.962 1.247a15.5 15.5 0 0 1-4.152 1.406a18 18 0 0 1-2.51.270v.022h-.649v-.018c-.293-.014-.578-.026-.868-.047a15.4 15.4 0 0 1-2.296-.352a15.56 15.56 0 0 1-6.885-3.590c-.185-.164-.360-.333-.540-.503a.4.4 0 0 1-.101-.146a.195.195 0 0 1 .098-.256a.2.2 0 0 1 .147 0a1 1 0 0 1 .138.069a20.6 20.6 0 0 0 6.164 2.546a22 22 0 0 0 2.212.398a20.4 20.4 0 0 0 3.213.146a17 17 0 0 0 1.724-.146a21 21 0 0 0 3.935-.896a19 19 0 0 0 1.973-.776a.44.44 0 0 1 .318-.043a.33.33 0 0 1 .240.398l-.022.066zm1.028 1.488a3.6 3.6 0 0 1-.615.757a.4.4 0 0 1-.170.107a.123.123 0 0 1-.169-.124a.6.6 0 0 1 .038-.162c.185-.496.366-.990.510-1.504a5.4 5.4 0 0 0 .180-.859a1.7 1.7 0 0 0 0-.318a.41.41 0 0 0-.294-.388a2 2 0 0 0-.509-.095a8.4 8.4 0 0 0-1.459.064l-.641.080c-.070 0-.132 0-.170-.065a.18.18 0 0 1 .014-.190a.6.6 0 0 1 .162-.148a3.7 3.7 0 0 1 1.299-.562a6.4 6.4 0 0 1 1.097-.121q.520.002 1.028.121a1.5 1.5 0 0 1 .276.102c.121.050.206.162.219.293a2 2 0 0 1 .014.455a5.86 5.86 0 0 1-.806 2.55zm-2.55-5.72a1 1 0 0 0 .301.010a.7.7 0 0 0 .505-.293a1 1 0 0 0 .147-.308l-.009.014a1.9 1.9 0 0 0 .074-.678a3 3 0 0 0 0-.293a1.6 1.6 0 0 0-.147-.600a.69.69 0 0 0-.483-.376a.9.9 0 0 0-.302-.010a.7.7 0 0 0-.542.328a1.2 1.2 0 0 0-.147.350a2.9 2.9 0 0 0-.042.933a1.5 1.5 0 0 0 .147.525a.68.68 0 0 0 .497.397zm-3.523-1.96a.473.473 0 0 0-.394-.640c-.026 0-.047-.010-.073-.010a.8.8 0 0 0-.775.302a1.3 1.3 0 0 0-.211.578c-.015.047.010.069.058.073a5 5 0 0 0 .642.053q.165.009.328-.026a.465.465 0 0 0 .425-.330m-5.981-.255a1.2 1.2 0 0 0-.106.260a2.7 2.7 0 0 0-.065.997a1.5 1.5 0 0 0 .147.536a.73.73 0 0 0 .568.391a1.3 1.3 0 0 0 .832-.158a.15.15 0 0 0 .086-.147v-.966h.007c0-.323-.010-.641 0-.968a.15.15 0 0 0-.096-.156a1.6 1.6 0 0 0-.817-.147a.68.68 0 0 0-.556.358M3.855 7.051a.75.75 0 0 0 .488-.188a.8.8 0 0 0 .243-.425a2.7 2.7 0 0 0 .065-1.002a1.5 1.5 0 0 0-.135-.540a.65.65 0 0 0-.505-.382a1.44 1.44 0 0 0-.912.137a.16.16 0 0 0-.105.164v1.917a.15.15 0 0 0 .090.147a1.47 1.47 0 0 0 .771.170"/></svg>',
            query: 'discover/tv?sort_by=first_air_date.desc&first_air_date.gte=2015-01-01&vote_average.gte=5&vote_average.lte=10&first_air_date.lte=',
            source: 'tmdb',
            networks: '1024',
            settingName: 'ext_prime'
        },
        {
            title: 'MGM+',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M43.5 35.5v-23a4 4 0 0 0-4-4h-31a4 4 0 0 0-4 4v23a4 4 0 0 0 4 4h31a4 4 0 0 0 4-4" stroke-width="1.5"/><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M38.6 22.004v4m-2-2h4m-15.07 3.99v-8l4 8l4-7.98v7.99m-10.41-5.35a2.65 2.65 0 1 0-5.3 0v2.7a2.65 2.65 0 0 0 5.3.003v-.003h-2.65M7.4 27.994v-8l4 8l4-7.98v7.99" stroke-width="1.5"/></svg>',
            query: 'discover/tv?sort_by=first_air_date.desc&first_air_date.gte=2015-01-01&vote_average.gte=5&vote_average.lte=10&first_air_date.lte=',
            source: 'tmdb',
            networks: '6219',
            settingName: 'ext_mgm'
        },
        {
            title: 'Кинопоиск',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M12.049 0C5.45 0 .104 5.373.104 12S5.45 24 12.049 24c3.928 0 7.414-1.904 9.592-4.844l-9.803-5.174l6.256 6.418h-3.559l-4.373-6.086V20.4h-2.89V3.6h2.89v6.095L14.535 3.6h3.559l-6.422 6.627l9.98-5.368C19.476 1.911 15.984 0 12.05 0zm10.924 7.133l-9.994 4.027l10.917-.713a12 12 0 0 0-.923-3.314m-10.065 5.68l10.065 4.054c.458-1.036.774-2.149.923-3.314z"/></svg>',
            query: 'discover/tv?language=ru&with_networks=3827&sort_by=first_air_date.desc&first_air_date.gte=2015-01-01&first_air_date.lte=',
            source: 'tmdb',
            settingName: 'ext_kp'
        },
        {
            title: 'Мультсериалы',
            icon: '<svg viewBox="0 0 514 514" xmlns="http://www.w3.org/2000/svg"><path d="m400 2c-79 6-142 75-142 156v14h-99l-98 1-5 2c-38 17-23 63 21 65h15l-3 6c-10 20-10 24-11 76v45l-5-8c-7-12-13-26-18-39-5-15-6-17-11-21-13-12-35-7-41 10-6 16 17 70 46 105 116 145 347 127 439-34 31-54 31-87-1-87-15 0-21 5-28 27-6 18-28 58-31 58-1 0-1-22-1-49v-50l-11-55c-12-60-12-58-6-63 8-7 15-3 24 11 14 24 29 30 47 21 20-9 21-17 10-71-10-52-10-53 2-53s21-14 20-28c-1-6-2-7-10-13-30-20-65-29-103-26m43 74c-10 3-14 17-6 25 13 13 32-4 23-19-3-5-11-8-17-6m-289 114v27l1 26 2 3 3 3h46 46l3-3 2-3v-27-27h-51c-36 0-51 0-52 1m78 116c-54 9-96 54-102 109l-1 6 10 6c70 45 158 47 230 4 9-5 8-4 7-15-7-71-73-122-144-110" fill="currentColor" fill-rule="evenodd"/></svg>',
            query: 'discover/tv?with_genres=10762,16&sort_by=revenue.desc&with_original_language=ru|uk|en|be|cn',
            source: 'tmdb',
            settingName: 'ext_mult_series'
        },
        {
            title: 'Мультфильмы (TMDB)',
            icon: '<svg viewBox="0 0 514 514" xmlns="http://www.w3.org/2000/svg"><path d="m400 2c-79 6-142 75-142 156v14h-99l-98 1-5 2c-38 17-23 63 21 65h15l-3 6c-10 20-10 24-11 76v45l-5-8c-7-12-13-26-18-39-5-15-6-17-11-21-13-12-35-7-41 10-6 16 17 70 46 105 116 145 347 127 439-34 31-54 31-87-1-87-15 0-21 5-28 27-6 18-28 58-31 58-1 0-1-22-1-49v-50l-11-55c-12-60-12-58-6-63 8-7 15-3 24 11 14 24 29 30 47 21 20-9 21-17 10-71-10-52-10-53 2-53s21-14 20-28c-1-6-2-7-10-13-30-20-65-29-103-26m43 74c-10 3-14 17-6 25 13 13 32-4 23-19-3-5-11-8-17-6m-289 114v27l1 26 2 3 3 3h46 46l3-3 2-3v-27-27h-51c-36 0-51 0-52 1m78 116c-54 9-96 54-102 109l-1 6 10 6c70 45 158 47 230 4 9-5 8-4 7-15-7-71-73-122-144-110" fill="currentColor" fill-rule="evenodd"/></svg>',
            query: 'discover/movie?with_genres=10751,16&sort_by=revenue.desc&with_original_language=ru|uk|en|be|zh|cn',
            source: 'tmdb',
            settingName: 'ext_mult_tmdb'
        },
        {
            title: 'Мультфильмы (CUB)',
            icon: '<svg fill="currentColor" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="256px" height="256px" viewBox="0 0 76.688 76.687" xml:space="preserve" stroke="currentColor"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <path d="M75.191,30.104h-0.598c-0.574-6.778-4.99-12.47-11.062-14.894C57.993,7.232,48.773,1.992,38.345,1.992 c-10.427,0-19.647,5.237-25.187,13.217c-6.07,2.424-10.485,8.114-11.06,14.895H1.5c-0.828,0-1.5,0.673-1.5,1.5 c0,0.828,0.672,1.5,1.5,1.5h0.598C2.56,38.56,5.502,43.321,9.802,46.233l4.249,27.192c0.114,0.73,0.743,1.271,1.482,1.271h11.248c0.828,0,1.5-0.672,1.5-1.5c0-5.55,4.515-10.063,10.063-10.063c5.548,0,10.063,4.517,10.063,10.063c0,0.828,0.672,1.5,1.5,1.5 h11.248c0.737,0,1.366-0.539,1.479-1.271l4.25-27.192c4.301-2.914,7.242-7.673,7.703-13.129h0.6c0.826,0,1.5-0.672,1.5-1.5 C76.689,30.777,76.02,30.104,75.191,30.104z M38.345,4.992c8.084,0,15.374,3.49,20.434,9.042c-0.582-0.059-1.172-0.09-1.77-0.09 c-9.229,0-16.816,7.123-17.582,16.157h-2.167c-0.765-9.034-8.352-16.156-17.582-16.156c-0.597,0-1.186,0.03-1.768,0.09 C22.972,8.484,30.259,4.992,38.345,4.992z M65.993,32.527l-1.854,11.874c-2.113,1.185-4.541,1.86-7.129,1.86 c-8.082,0-14.658-6.574-14.658-14.657c0-8.083,6.576-14.657,14.658-14.657c1.598,0,3.131,0.266,4.569,0.738 C64.35,21.97,65.973,27.061,65.993,32.527z M10.699,32.527c0.021-5.466,1.645-10.557,4.413-14.842 c1.439-0.474,2.973-0.738,4.569-0.738c8.083,0,14.658,6.574,14.658,14.657c0,8.082-6.575,14.658-14.658,14.658 c-2.587,0-5.015-0.682-7.127-1.86L10.699,32.527z M5.025,31.604c0-4.497,2.04-8.523,5.237-11.215 c-1.645,3.755-2.563,7.896-2.563,12.252c0,0.077,0.006,0.155,0.018,0.23l1.382,8.846C6.58,39.083,5.025,35.526,5.025,31.604z M59.872,71.696h-8.549c-0.746-6.5-6.281-11.563-12.979-11.563c-6.697,0-12.23,5.063-12.977,11.563h-8.55l-3.705-23.715 c2.032,0.817,4.246,1.28,6.567,1.28c9.23,0,16.817-7.123,17.582-16.158h2.167c0.765,9.035,8.353,16.158,17.582,16.158 c2.322,0,4.535-0.463,6.566-1.28L59.872,71.696z M67.596,41.716l1.381-8.846c0.012-0.075,0.018-0.153,0.018-0.23 c0-4.354-0.918-8.497-2.562-12.252c3.199,2.69,5.24,6.718,5.24,11.215C71.67,35.526,70.111,39.083,67.596,41.716z"></path> <path d="M25.777,25.671c0-3.36-2.734-6.095-6.096-6.095c-3.36,0-6.094,2.732-6.094,6.095c0,3.36,2.733,6.094,6.094,6.094 S25.777,29.032,25.777,25.671z M19.68,28.765c-0.373,0-0.727-0.077-1.058-0.197c1.995-0.157,3.575-1.812,3.575-3.846 c0-0.356-0.064-0.696-0.155-1.024c0.451,0.538,0.733,1.222,0.733,1.977C22.777,27.377,21.387,28.765,19.68,28.765z M19.198,24.721 c0,0.482-0.395,0.876-0.877,0.876c-0.483,0-0.876-0.394-0.876-0.876s0.393-0.877,0.876-0.877 C18.803,23.844,19.198,24.239,19.198,24.721z"></path> <path d="M49.7,25.671c0,3.359,2.731,6.094,6.095,6.094c3.36,0,6.094-2.732,6.094-6.094c0-3.362-2.732-6.095-6.094-6.095 C52.432,19.576,49.7,22.311,49.7,25.671z M53.559,24.721c0-0.482,0.393-0.877,0.877-0.877c0.481,0,0.875,0.395,0.875,0.877 s-0.394,0.876-0.875,0.876C53.95,25.597,53.559,25.203,53.559,24.721z M55.795,28.765c-0.373,0-0.728-0.077-1.06-0.197 c1.996-0.157,3.573-1.812,3.573-3.846c0-0.356-0.063-0.696-0.153-1.025c0.451,0.538,0.731,1.222,0.731,1.977 C58.889,27.377,57.501,28.765,55.795,28.765z"></path> <path d="M46.2,50.151h-8.555c-0.827,0-1.5,0.672-1.5,1.5c0,0.827,0.673,1.5,1.5,1.5H46.2c0.828,0,1.5-0.673,1.5-1.5 C47.7,50.823,47.029,50.151,46.2,50.151z"></path> </g> </g> </g></svg>',
            query: '',
            source: 'cub',
            genres: '16',
            id: '16',
            settingName: 'ext_mult_cub'
        },
        {
            title: 'Nickelodeon',
            icon: '<svg viewBox="0 0 514 514" xmlns="http://www.w3.org/2000/svg"><path d="m400 2c-79 6-142 75-142 156v14h-99l-98 1-5 2c-38 17-23 63 21 65h15l-3 6c-10 20-10 24-11 76v45l-5-8c-7-12-13-26-18-39-5-15-6-17-11-21-13-12-35-7-41 10-6 16 17 70 46 105 116 145 347 127 439-34 31-54 31-87-1-87-15 0-21 5-28 27-6 18-28 58-31 58-1 0-1-22-1-49v-50l-11-55c-12-60-12-58-6-63 8-7 15-3 24 11 14 24 29 30 47 21 20-9 21-17 10-71-10-52-10-53 2-53s21-14 20-28c-1-6-2-7-10-13-30-20-65-29-103-26m43 74c-10 3-14 17-6 25 13 13 32-4 23-19-3-5-11-8-17-6m-289 114v27l1 26 2 3 3 3h46 46l3-3 2-3v-27-27h-51c-36 0-51 0-52 1m78 116c-54 9-96 54-102 109l-1 6 10 6c70 45 158 47 230 4 9-5 8-4 7-15-7-71-73-122-144-110" fill="currentColor" fill-rule="evenodd"/></svg>',
            query: 'discover/tv?language=ru&with_networks=13',
            source: 'tmdb',
            settingName: 'ext_nick'
        },
        {
            title: 'Start',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24"><path fill="currentColor" d="M2.185 6.758c-1.495 0-2.193.849-2.193 2.171v1.534c0 1.373.246 1.959 1.235 2.58l.763.474c.618.374.698.651.698 1.453v1.354c0 .393-.18.636-.521.636c-.342 0-.522-.228-.522-.636v-2.125H-.008v2.14c0 1.338.683 2.17 2.159 2.17c1.526 0 2.224-.882 2.224-2.17v-1.666c0-1.272-.326-1.927-1.265-2.529l-.763-.49c-.537-.342-.668-.586-.668-1.469v-1.24c0-.394.18-.637.503-.637c.341 0 .537.247.537.636v2.105h1.656V8.93c0-1.307-.698-2.17-2.19-2.17m2.711.162v1.635h1.17v9.797h1.687V8.555h1.17V6.92zm5.066 0l-.943 11.427h1.672l.23-3.053h1.227l.23 3.053h1.706l-.94-11.427Zm4.985 0v11.427h1.687v-4.78h1.024v3.917c0 .652.276.863.276.863h1.687c.004.004-.272-.207-.272-.863v-2.972c0-.949-.357-1.47-1.22-1.65v-.197c.86-.131 1.3-.768 1.3-1.797V8.929c0-1.257-.747-2.009-2.193-2.009zm5.02 0v1.635h1.169v9.797h1.687V8.555h1.17V6.92zm-8.529 1.55h.2l.399 5.274h-.997zm5.2.004h.437c.522 0 .667.212.667 1.06v1.419c0 .817-.18 1.06-.732 1.06h-.372z"/></svg>',
            query: 'discover/tv?language=ru&with_networks=2493&sort_by=first_air_date.desc&first_air_date.lte=',
            source: 'tmdb',
            settingName: 'ext_start'
        }
    ];
    
    const DEFAULT_SETTINGS = allCategories.reduce((acc, category) => {
        acc[category.settingName] = false;
        return acc;
    }, {});
    
    let settings = {...DEFAULT_SETTINGS};
    let menuItems = [];
    let menuInitialized = false;

    function initPlugin() {
        loadSettings();
        registerSettings();
        
        Lampa.Listener.follow('menu', () => {
            if (!menuInitialized) {
                menuInitialized = true;
                createMenuItems();
            }
        });

        if ($('.menu__list').length) {
            createMenuItems();
            menuInitialized = true;
        }
    }

    function loadSettings() {
        try {
            const savedSettings = localStorage.getItem(SETTINGS_KEY);
            if (savedSettings && savedSettings !== 'undefined' && savedSettings !== 'null') {
                const parsed = JSON.parse(savedSettings);
                settings = {...DEFAULT_SETTINGS, ...parsed};
            }
        } catch (e) {
            settings = {...DEFAULT_SETTINGS};
        }
        saveSettings();
    }
    
    function saveSettings() {
        try {
            localStorage.setItem(SETTINGS_KEY, JSON.stringify(settings));
            Lampa.Storage.set(SETTINGS_KEY, JSON.stringify(settings));
            return true;
        } catch (e) {
            return false;
        }
    }
    
    function registerSettings() {
        Lampa.SettingsApi.addComponent({
            component: 'extended_podborki',
            icon: '<svg height="36" viewBox="0 0 38 36" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="2" y="8" width="34" height="21" rx="3" stroke="white" stroke-width="3"/><line x1="13.0925" y1="2.34874" x2="16.3487" y2="6.90754" stroke="white" stroke-width="3" stroke-linecap="round"/><line x1="1.5" y1="-1.5" x2="9.31665" y2="-1.5" transform="matrix(-0.757816 0.652468 0.652468 0.757816 26.197 2)" stroke="white" stroke-width="3" stroke-linecap="round"/><line x1="9.5" y1="34.5" x2="29.5" y2="34.5" stroke="white" stroke-width="3" stroke-linecap="round"/></svg>',
            name: "Категории"
        });
        
        allCategories.forEach(category => {
            Lampa.SettingsApi.addParam({
                component: 'extended_podborki',
                param: {
                    name: category.settingName,
                    type: 'select',
                    values: {1: "Показать", 0: "Скрыть"},
                    default: settings[category.settingName] ? '1' : '0'
                },
                field: {name: category.title},
                onChange: function(value) {
                    settings[category.settingName] = (value === '1');
                    saveSettings();
                    createMenuItems();
                }
            });
        });
    }
    
    function createMenuItems() {
        $('.menu__item.extended-podborki-item').remove();
        menuItems = [];
        
        const tvItem = $('[data-action="tv"]');
        const menuList = $('.menu .menu__list').eq(0);
        const currentDate = new Date().toISOString().split('T')[0];
        
        allCategories.forEach(category => {
            if (settings[category.settingName]) {
                const menuItem = $(`
                    <li class="menu__item selector extended-podborki-item" data-action="${category.settingName}">
                        <div class="menu__ico">${category.icon}</div>
                        <div class="menu__text">${category.title}</div>
                    </li>
                `);
                
                menuItem.on('hover:enter', function() {
                    let params = {
                        url: category.query,
                        title: category.title,
                        component: 'category_full',
                        source: category.source,
                        card_type: 'true',
                        page: 1
                    };
                    
                    if (category.query.includes('first_air_date.lte=') || 
                        category.query.includes('primary_release_date.lte=')) {
                        params.url += currentDate;
                    }
                    
                    if (category.networks) params.networks = category.networks;
                    if (category.genres) params.genres = category.genres;
                    if (category.id) params.id = category.id;
                    if (category.sort) params.sort = category.sort;
                    
                    Lampa.Activity.push(params);
                });
                
                menuItems.push(menuItem);
            }
        });
        
        if (menuItems.length) {
            if (tvItem.length) {
                tvItem.before(menuItems);
            } else {
                menuList.append(menuItems);
            }
        }
    }
    
    function init() {
        if (window.appready) {
            initPlugin();
        } else {
            Lampa.Listener.follow('app', function(e) {
                if (e.type === 'ready') initPlugin();
            });
        }
    }
    
    if (!window.extendedPodborkiInitialized) {
        window.extendedPodborkiInitialized = true;
        init();
    }
})();